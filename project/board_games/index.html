<html lang="en">
<head>
  <title>grady.dev | Custom Board Games</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="viewport" content="width=device-width">
<style>

body {
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: Helvetica, sans-serif;
  line-height: 1.5rem;
}

h1 {
  font-size: 3rem;
  text-align: left;
  margin: 4rem 0 0rem 0;
  line-height: 3rem;
}

h4 {
  font-size: 1.5rem;
  text-align: left;
  margin: 1rem 0;
}

img {
  max-width: 100%;
}

.width-wrapper {
  width: Calc(100% - 2rem);
  max-width: 1000px;
  min-width: Calc(320px - 2rem);
  margin: 0 1rem 1rem 1rem;
  display: inline-block;
  position: relative;
  height: Calc(100% - 1rem);
}

.decorated-box {
  height:  auto;
  position:  relative;
}

.decorated-content {
  width:  Calc(100% - 16rem);
  top: 0;
  margin: 0rem 8rem 0;
  padding:  1rem 0 2rem 0;
  text-align: left;
  font-size: 1.5rem;
  line-height: 2.25rem;
}

.vertical {
  position: absolute;
  height: Calc(100% - 1rem);
  width: 8rem;
  top: 0;
}
.left.vertical {
  left:  0;
}
.right.vertical {
  right:  0;
}

.horizontal {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 1rem;
}
.horizontal > div {
  width:  100%;
}

* {
  color: #272727;
}

.black {
  background: #272727;
}

.red {
  background: #d20909;
}

.yellow {
  background: #eac40a;
}

.blue {
  background: #1444b1;
}

.black,
.red,
.blue,
.yellow {
  display: block;
  position: absolute;
  width: 1rem;
  height: 1rem;
  transition: width .5s linear, height .5s linear;
}

.vertical > div {
  height: Calc(100% - 1rem);
  top: .5rem;
}

.vertical > div.has-top {
  top: -1rem;
  height: Calc(100% + .5rem);
}

.vertical > div.has-bottom {
  top: .5rem;
  height: Calc(100% + .5rem);
}

.vertical > div.has-bottom.has-top {
  top: -1rem;
  height: Calc(100% + 2rem);
}

.pos-0 { left: 0rem; }
.pos-1 { left: 2rem; }
.pos-2 { left: 4rem; }
.pos-3 { left: 6rem; }
.pos-4 { right: 6rem; }
.pos-5 { right: 4rem; }
.pos-6 { right: 2rem; }
.pos-7 { right: 0rem; }


.from-0 { left: 1rem; }
.from-1 { left: 3rem; }
.from-2 { left: 5rem; }
.from-3 { left: 7rem; }
.from-4 { right: 7rem; }
.from-5 { right: 5rem; }
.from-6 { right: 3rem; }
.from-7 { right: 1rem; }

.from-3.to-4,
.from-4.to-3 {
    width: Calc(100% - 14rem);
}

.from-2.to-4,
.from-3.to-5,
.from-4.to-2,
.from-5.to-3 {
    width: Calc(100% - 12rem);
}

.from-1.to-4,
.from-2.to-5,
.from-3.to-6,
.from-4.to-1,
.from-5.to-2,
.from-6.to-3 {
    width: Calc(100% - 10rem);
}

.from-0.to-4,
.from-1.to-5,
.from-2.to-6,
.from-3.to-7,
.from-4.to-0,
.from-5.to-1,
.from-6.to-2,
.from-7.to-3 {
    width: Calc(100% - 8rem);
}

.from-0.to-5,
.from-1.to-6,
.from-2.to-7,
.from-5.to-0,
.from-6.to-1,
.from-7.to-2 {
    width: Calc(100% - 6rem);
}

.from-0.to-6,
.from-1.to-7,
.from-6.to-0,
.from-7.to-1 {
    width: Calc(100% - 4rem);
}

.from-0.to-7,
.from-7.to-0 {
    width: Calc(100% - 2rem);
}


.sr-only {
  position:absolute;
  left:-10000px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden;
}

@media only screen and (max-width: 800px) {
  html {
    font-size: 8px;
  }

  .decorated-content {
    font-size: 2.5rem;
    line-height: 3rem;
  }

  h4 {
      font-size: 3rem;
  }

  h1 {
      font-size: 5rem;
      line-height:  6rem;
  }
}

@media only screen and (max-width: 500px) {
  html {
    font-size: 6px;
  }

  .decorated-content {
    font-size: 3rem;
    line-height: 3.5rem;
  }
}

@media only screen and (max-width: 360px) {
  .decorated-content {
    font-size: 2.5rem;
    line-height: 3rem;
  }
}


   


</style>
<body>
<div class="sr-only"><a href="#main">Skip to content</a></div>
<div class="width-wrapper pre-transition" id="width-wrapper">
<header class="decorated-box">
  <div aria-hidden="true" class="left vertical"></div>
  <div class="decorated-content">
    <nav><a href="..">Back</a></nav>
    <h1> Custom Board Games</h1>
  </div>
  <div aria-hidden="true" class="right vertical"></div>
  <div aria-hidden="true" class="horizontal"></div>
</header>

<main id="main">



  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        I love making board games for friends and family as gifts, often
themed around a shared interest or an inside joke. While these were
originally seperate posts, I&rsquo;ve condensed them here for brevity.
<h2 id="2024---frontier">2024 - FRONTIER</h2>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        I (and my boyfriend) both have a love-hate relationship with
Frontier Airlines. The fares are impossibly cheap, and if you have their
credit card and Discount Den memberhsip, things can be legitimately a
fantastic bargin. However, they&rsquo;re often late, the staff isn&rsquo;t the
friendliest, and I&rsquo;ve had some of my strangest experiences flying with
them. We also both really like the game PanAm, about the expansion
of the PanAm corporation - a gorgeous game with great mechanics like stock
pricing and technological upgrades.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        So, when my boyfriend mentioned offhandedly that I should make a version of
PanAm based off of FRONTIER, I was struck by the jealousy you have
when someone comes up with a great idea that you should have had. While I
initially wrote off the idea for that Christmas (because this comment was
made in early November), I took the cancellation of a flight on FRONTIER a
week later as a sign/opportunity to build out a full version of the game.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/frontier-rough.png" alt="A very rough sketch of the board that I&rsquo;d end up creating, with only the cities laid out and circles between them representing approximate distances">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        The first sketch (above), the final board, 24h later, below:
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/frontier-map.png" alt="The map from the board game, an enormously complex SVG with colorful routes of airlines criscrossing the United States">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        This project was very low-fi - there were only two technical elements,
simulations to ensure the stock price deviation and expansion frequency was
distributionally good and within normal bounds - a property the real game
fails to live up to .
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/frontier-simulation.png" alt="The output of a simulation from the board game">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        The majority of the work on this project was just learning to use InkScape
effectively - practicing my (minimal) SVG skills on a broader canvas and
learning the keyboard shortcuts, automation tools (like cloning), and becoming
diligent about layer and group naming, selectors, and tags.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/frontier-event.png" alt="An event card from the frontier board game, giving the history of the spirit aquisition attempt from 2022">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        Only the destination cards&rsquo; images were generated using AI - and even then
there was a lot of subjective post processing.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/frontier-dest.png" alt="A screenshot of a bunch of cards - each corresponding to an airport in the united states, with the airport code shown on top of an iconic landmark from the location of the airport">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        The gift has yet to be given - but thankfully I don&rsquo;t think anyone reads my blog!
<h2 id="2024---puzzle-generation">2024 - Puzzle Generation</h2>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        You can check out my laser-cut puzzles <a href="/project/laser_puzzles">here</a>.
<h2 id="2023---tail-tally-point-salad">2023 - Tail Tally (Point Salad)</h2>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        In 2023 I made a board game copy of Point Salad for my boyfriend.
He loves the game Point Salad and loves his dogs even more.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/tail-tally-1.png" alt="The front of a card from the Tail Tally deck">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/tail-tally-2.png" alt="The back of a card from the Tail Tally deck">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        The code for it is written in Go,
generates HTML files (mostly to take advantage of flexbox positioning),
and then automatically screenshots those at 500dpi, with bleeding/cutoff
that matches the specifications from my favorite <a href="https://www.makeplayingcards.com/">board game printer</a>.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        This one
was particularly fun because I made it fully generalizable - you just
input six photos and select a few things about the color scheme and sizing you
want, and the deck pops out. I&rsquo;ve printed (but not yet gifted) another version
for friends - so beware, friends.
<h2 id="2022---wingspan">2022 - Wingspan</h2>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        A writeup of the Wingspan project is <a href="/project/wingspan/">here</a>, but a few bonus images are below.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/wingspan-jay.png" alt="A card depicting a blue jay from the auto-generated wingspan deck project">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/wingspan-bluebird.png" alt="A card depicting a bluebird from the auto-generated wingspan deck project">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/wingspan-osprey.png" alt="A card depicting an osprey from the auto-generated wingspan deck project">
<h2 id="2020-2021---ticket-to-ride">2020-2021 - Ticket to Ride</h2>
<h3 id="2020---the-original-gift">2020 - The Original Gift</h3>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        My mom loves the board game Ticket to Ride, perhaps to a fault.
Starting in 2018 (and apparently continuing to this day) she regularly plays it by
herself late into the night - with two distinct players (her right and
left hand) competing to see which one would win.
<blockquote>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        &ldquo;I think everyone needs something to unwind at the end of a day, some people need to watch silly TV some people like to have a drink, for me it&rsquo;s board games against myself.&rdquo; - My mother
</blockquote>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        In 2020, we&rsquo;d been planning on celebrating her 60th birthday as a family,
but we were unable to do so because of the pandemic. My sister and I, keenly
aware that this was a really big loss, decided to pour our energies into
a great gift, and so took a weekend to create this board game.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        Each location is one that she has been to and has fond memories of. The photo
cards we created were a few select ones from family lore. The trains were
dowels that I&rsquo;d cut to length and dyed, and the tokens my sister made from
clay, each a fun inside joke.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-card1.png" alt="An early Ticket to Ride Card, featuring my parents on a green background, representing a green train card">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        This was the first custom game I&rsquo;d made, so looking back on it, the build
was fairly primitive - we sent back and forth PPT files in ultra HD.
The background is from the CINDI project. The files
are large enough that they&rsquo;ve been lost to time, but the board(s) itself
lives on, as do some artifacts from the early days of its creation.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-map-1.png" alt="the original sketch of the map for the board">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-map-2.png" alt="the revised map for the board, including distances">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-map-3.png" alt="the final layout for the board">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-map-final.jpg" alt="the final board, well used and loved">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        My mom loved it, and it has further extended her TTR obsession.
<h3 id="2021---ticket-to-ride-cards">2021 - Ticket To Ride Cards</h3>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        When a year had gone by, the pandemic had continued, and my mother was still
obsessed with TTR (see below), we decided to build out a nicer deck of the
cards, with each card capturing a different, unique photo from our family.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        This project was mostly about selecting the right set of photos from our
library, though I used some very basic facial detection APIs from Google to
make sure they were approximately centered within the boundaries of the frame.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-card2.png" alt="A new ticket to ride card, featuring myself and my sister on a purple background, representing a purple train card">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        <img src="/img/ttr-card3.png" alt="Another TTR train card.">
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        My mother still refuses to use these cards - to my chagrin - because &ldquo;she hasn&rsquo;t fully worn through the other deck yet&rdquo; - in case you thought I was overstating the degree of her obsession.
<h3 id="2021---webapp">2021 - Webapp</h3>
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        One last time I dipped into the TTR well by creating an interactive version of the
custom board game using the simplest thing you can imagine: global
state within a Java binary, running on a server on GCP with open connections,
once-per-second polling, and start/stop mechanics. Building out the bizlogic for
turns and state proved challenging as I stepped on every rake that someone does
when creating a state based multiplayer game (validation, transition, etc.). A few
years later I&rsquo;d read a book on generalized gameplay schemas and be struck by how
I&rsquo;d made every mistake in the book. You live and learn though!
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        The end result was something that was fun for our family to play a few times,
actually a decently responsive application, and a great reminder: building
something hacky can actually get you reasonably far as long as you don&rsquo;t intend
for it to be around long term.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  


  
    <div class="decorated-box">
      <div aria-hidden="true" class="left vertical"></div>
      <div class="decorated-content">
        It was a good mother&rsquo;s day gift - though probably the time we spent on the phone while
we played it was the real one.
      </div>
      <div aria-hidden="true" class="right vertical"></div>
      <div aria-hidden="true" class="horizontal"></div>
    </div>
  

</main>

<div aria-hidden="true" class="decorated-box">
  <div class="left vertical"></div>
  <p class="decorated-content">
  </p>
  <div class="right vertical"></div>
  <div class="horizontal"></div>
</div>
</div>
<script>
  var wrapper = document.getElementById("width-wrapper");
  wrapper.classList.remove("pre-transition");

  var EMPTY = "empty";

  function randomInitialAssignment() {
    return ["red", "black", "yellow", "blue", EMPTY, EMPTY, EMPTY, EMPTY]
  }

  function couldSwapPair(assignment, from, to) {
    if (from < 4 == to < 4){
      return false;
    }
    if (assignment[to] != EMPTY || assignment[from] == EMPTY) {
      return false;
    }
    return true;
  }

  function randomPairToSwap(assignment) {
    var fromIndexOfPopulated = Math.floor(4 * Math.random());
    var fromIndex = -1;
    for (var i = 0; i < 8; i++) {
      if (assignment[i] != EMPTY) {
        if (fromIndexOfPopulated == 0) {
          fromIndex = i;
          break;
        }
        fromIndexOfPopulated--;
      }
    }
    var numEmptyOnOtherSide = 0;
    var otherSideStart = fromIndex < 4 ? 4 : 0;
    for (var i = 0; i < 4; i++) {
      if (assignment[i + otherSideStart] == EMPTY) {
        numEmptyOnOtherSide++;
      }
    }
    var toIndexOnOtherSideOfPopulated = Math.floor(numEmptyOnOtherSide * Math.random());
    var toIndex = -1;
    for (var i = otherSideStart; i < otherSideStart + 4; i++) {
      if (assignment[i] == EMPTY) {
        if (toIndexOnOtherSideOfPopulated == 0) {
          toIndex = i;
          break;
        }
        toIndexOnOtherSideOfPopulated--;
      }
    }
    return {
      "origin": fromIndex,
      "destination": toIndex
    };
  }

  function createParagraphAssignments(numParagraphs) {
    var paragraphAssignments = [];
    paragraphAssignments[0] = randomInitialAssignment();
    for (var i = 1; i < numParagraphs; i++) {
      var pairToSwap = randomPairToSwap(paragraphAssignments[i-1]);
      var newAssignment = [];
      Object.assign(newAssignment, paragraphAssignments[i-1]);
      newAssignment[pairToSwap.destination] = newAssignment[pairToSwap.origin];
      newAssignment[pairToSwap.origin] = EMPTY;
      newAssignment.origin = pairToSwap.origin;
      newAssignment.destination = pairToSwap.destination;
      paragraphAssignments.push(newAssignment);
    }
    for (var i = 0; i < numParagraphs - 1; i++) {
      paragraphAssignments[i].origin = paragraphAssignments[i+1].origin;
      paragraphAssignments[i].destination = paragraphAssignments[i+1].destination;
    }
    paragraphAssignments[numParagraphs-1].origin = -1;
    paragraphAssignments[numParagraphs-1].destination = -1;

    return paragraphAssignments;
  }

  function isInBetween(a, b, c){
    return ((a < b) == (b < c));
  }

  function assignAssignmentToParagraphBox(lastAssignment, assignment, box) {

    var bottomSidebar = box.getElementsByClassName('horizontal')[0];
    var classesForBottom = assignment[assignment.origin] + " from-" + assignment.origin + " to-" + assignment.destination;
    var bottomSidebarHtml = "<div class=\"" + classesForBottom + "\"></div>";
    bottomSidebar.innerHTML = bottomSidebarHtml;

    var leftSidebarHtml = "";
    for (var i = 0; i < 4; i++) {
      if (assignment[i] !== EMPTY) {
        var classesToAdd = assignment[i] + " pos-" + i;
        if (!isInBetween(lastAssignment.origin, i, lastAssignment.destination) || lastAssignment.destination == i){
          classesToAdd = classesToAdd + " has-top";
        }
        if (!isInBetween(assignment.origin, i, assignment.destination) || assignment.origin == i){
          classesToAdd = classesToAdd + " has-bottom";
        }
        leftSidebarHtml = leftSidebarHtml + '<div class="' +classesToAdd + '"></div>';
      }
    }
    var leftSidebar = box.getElementsByClassName('left')[0];
    leftSidebar.innerHTML = leftSidebarHtml;

    var rightSidebarHtml = "";
    for (var i = 4; i < 8; i++) {
      if (assignment[i] !== EMPTY) {
        var classesToAdd = assignment[i] + " pos-" + i;
        if (!isInBetween(lastAssignment.origin, i, lastAssignment.destination) || lastAssignment.destination == i){
          classesToAdd = classesToAdd + " has-top";
        }
        if (!isInBetween(assignment.origin, i, assignment.destination) || assignment.origin == i){
          classesToAdd = classesToAdd + " has-bottom";
        }
        rightSidebarHtml = rightSidebarHtml + '<div class="' +classesToAdd + '"></div>';
      }
    }
    var rightSidebar = box.getElementsByClassName('right')[0];
    rightSidebar.innerHTML = rightSidebarHtml;
  }

  var paragraphsBoxes = document.getElementsByClassName("decorated-box");
  var paragraphAssignments = createParagraphAssignments(paragraphsBoxes.length);
  console.log(paragraphAssignments);

  for (var i = 0; i < paragraphsBoxes.length; i++){
    var previous = {origin: -1, destination: -1};
    if (i > 0) {
      previous = paragraphAssignments[i - 1];
    }
    assignAssignmentToParagraphBox(previous, paragraphAssignments[i], paragraphsBoxes[i]);
  }
</script>
</body>
</html>
